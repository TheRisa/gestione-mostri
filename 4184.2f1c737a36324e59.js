"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4184],{4184:(v,m,g)=>{g.r(m),g.d(m,{CreazionePersonaggioPageModule:()=>z});var d=g(177),p=g(4341),l=g(4742),f=g(70),c=g(467),o=g(4438);function C(i,s){if(1&i){const r=o.RV6();o.j41(0,"ion-col",14)(1,"ion-item",29)(2,"ion-textarea",30),o.mxI("ngModelChange",function(n){const a=o.eBV(r).$implicit;return o.DH7(a.value,n)||(a.value=n),o.Njj(n)}),o.k0s()()()}if(2&i){const r=s.$implicit,e=s.index;o.R7$(2),o.Y8G("label","Abilit\xe0 "+(e+1)+":"),o.R50("ngModel",r.value)}}function M(i,s){if(1&i){const r=o.RV6();o.j41(0,"ion-col",14)(1,"ion-item",29)(2,"ion-textarea",31),o.mxI("ngModelChange",function(n){const a=o.eBV(r).$implicit;return o.DH7(a.value,n)||(a.value=n),o.Njj(n)}),o.k0s()()()}if(2&i){const r=s.$implicit,e=s.index;o.R7$(2),o.Y8G("label","Nota "+(e+1)+":"),o.R50("ngModel",r.value)}}let h=(()=>{var i;class s{constructor(e,n){this.modalCtrl=e,this.toastController=n,this.title="",this.personaggio={abilita:[{value:""}],dur:0,durMax:0,hpAttuali:0,hpMax:0,nome:"",dA:"",dM:"",note:[{value:""}],pfTmpAttuali:0,rapBase:0,rid:0,ridMax:0,rageType:"",critArma:2,txcAttaccoBase:8}}ngOnInit(){}cancel(){this.modalCtrl.dismiss(null,"cancel")}confirm(){var e=this;return(0,c.A)(function*(){e.checkEmpty()?yield(yield e.toastController.create({message:"Alcuni campi obbligatori (*) non sono stati correttamente compilati",duration:2500})).present():(e.personaggio.abilita=e.personaggio.abilita.filter(n=>!!n.value),e.personaggio.note=e.personaggio.note.filter(n=>!!n.value),e.modalCtrl.dismiss(e.personaggio,"confirm"))})()}checkEmpty(){return!(this.personaggio.nome&&this.personaggio.hpMax&&null!=this.personaggio.durMax&&null!=this.personaggio.ridMax&&this.personaggio.dA&&this.personaggio.rapBase&&this.personaggio.rageType&&this.personaggio.critArma&&this.personaggio.txcAttaccoBase)}aggiungiAbilita(){this.personaggio.abilita.push({value:""})}aggiungiNota(){this.personaggio.note.push({value:""})}}return(i=s).\u0275fac=function(e){return new(e||i)(o.rXU(l.W3),o.rXU(l.K_))},i.\u0275cmp=o.VBU({type:i,selectors:[["app-modifica-personaggio"]],decls:70,vars:14,consts:[[1,"ion-padding"],["size","12",2,"padding-right","1rem"],["color","light"],["label","Nome *","labelPlacement","floating",3,"ngModelChange","ngModel"],["size","4",2,"padding-right","1rem"],["label","PF Max *","labelPlacement","floating","type","number",3,"ngModelChange","ngModel"],["label","DUR Max *","labelPlacement","floating","type","number",3,"ngModelChange","ngModel"],["label","RID Max *","labelPlacement","floating","type","number",3,"ngModelChange","ngModel"],["label","Rap Base *","labelPlacement","floating","type","number",3,"ngModelChange","ngModel"],["label","dA *","labelPlacement","floating",3,"ngModelChange","ngModel"],["label","dM","labelPlacement","floating",3,"ngModelChange","ngModel"],["label","Crit arma *","labelPlacement","floating","type","number",3,"ngModelChange","ngModel"],["label","Tiro per colpire *","labelPlacement","floating","type","number",3,"ngModelChange","ngModel"],["label","Gittata","labelPlacement","floating",3,"ngModelChange","ngModel"],["size","12"],["label","Tipo di Rage *","labelPlacement","floating",3,"ngModelChange","ngModel"],["value","vincolato"],["value","assuefatto"],["value","dipendente"],["value","immune"],[2,"margin-top","2rem"],["size","12",4,"ngFor","ngForOf"],["size","12",2,"justify-content","center","display","flex"],["shape","round","color","medium",3,"click"],["slot","icon-only","name","add-outline"],[2,"padding-top","2rem"],["size","6"],["expand","block","color","danger",3,"click"],["expand","block",3,"click"],[2,"width","100%"],["labelPlacement","floating","placeholder","Testo abilit\xe0",3,"ngModelChange","label","ngModel"],["labelPlacement","floating","placeholder","Testo nota",3,"ngModelChange","label","ngModel"]],template:function(e,n){1&e&&(o.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),o.EFF(3),o.k0s()()(),o.j41(4,"ion-content",0)(5,"ion-row")(6,"ion-col",1)(7,"ion-item",2)(8,"ion-input",3),o.mxI("ngModelChange",function(t){return o.DH7(n.personaggio.nome,t)||(n.personaggio.nome=t),t}),o.k0s()()(),o.j41(9,"ion-col",4)(10,"ion-item",2)(11,"ion-input",5),o.mxI("ngModelChange",function(t){return o.DH7(n.personaggio.hpMax,t)||(n.personaggio.hpMax=t),t}),o.k0s()()(),o.j41(12,"ion-col",4)(13,"ion-item",2)(14,"ion-input",6),o.mxI("ngModelChange",function(t){return o.DH7(n.personaggio.durMax,t)||(n.personaggio.durMax=t),t}),o.k0s()()(),o.j41(15,"ion-col",4)(16,"ion-item",2)(17,"ion-input",7),o.mxI("ngModelChange",function(t){return o.DH7(n.personaggio.ridMax,t)||(n.personaggio.ridMax=t),t}),o.k0s()()(),o.j41(18,"ion-col",4)(19,"ion-item",2)(20,"ion-input",8),o.mxI("ngModelChange",function(t){return o.DH7(n.personaggio.rapBase,t)||(n.personaggio.rapBase=t),t}),o.k0s()()(),o.j41(21,"ion-col",4)(22,"ion-item",2)(23,"ion-input",9),o.mxI("ngModelChange",function(t){return o.DH7(n.personaggio.dA,t)||(n.personaggio.dA=t),t}),o.k0s()()(),o.j41(24,"ion-col",4)(25,"ion-item",2)(26,"ion-input",10),o.mxI("ngModelChange",function(t){return o.DH7(n.personaggio.dM,t)||(n.personaggio.dM=t),t}),o.k0s()()(),o.j41(27,"ion-col",4)(28,"ion-item",2)(29,"ion-input",11),o.mxI("ngModelChange",function(t){return o.DH7(n.personaggio.critArma,t)||(n.personaggio.critArma=t),t}),o.k0s()()(),o.j41(30,"ion-col",4)(31,"ion-item",2)(32,"ion-input",12),o.mxI("ngModelChange",function(t){return o.DH7(n.personaggio.txcAttaccoBase,t)||(n.personaggio.txcAttaccoBase=t),t}),o.k0s()()(),o.j41(33,"ion-col",4)(34,"ion-item",2)(35,"ion-input",13),o.mxI("ngModelChange",function(t){return o.DH7(n.personaggio.gittata,t)||(n.personaggio.gittata=t),t}),o.k0s()()(),o.j41(36,"ion-col",14)(37,"ion-item")(38,"ion-select",15),o.mxI("ngModelChange",function(t){return o.DH7(n.personaggio.rageType,t)||(n.personaggio.rageType=t),t}),o.j41(39,"ion-select-option",16),o.EFF(40,"Vincolato"),o.k0s(),o.j41(41,"ion-select-option",17),o.EFF(42,"Assuefatto"),o.k0s(),o.j41(43,"ion-select-option",18),o.EFF(44,"Dipendente"),o.k0s(),o.j41(45,"ion-select-option",19),o.EFF(46,"Immune"),o.k0s()()()()(),o.j41(47,"ion-row",20)(48,"ion-col",14)(49,"b"),o.EFF(50,"Abilit\xe0:"),o.k0s()(),o.DNE(51,C,3,2,"ion-col",21),o.j41(52,"ion-col",22)(53,"ion-button",23),o.bIt("click",function(){return n.aggiungiAbilita()}),o.nrm(54,"ion-icon",24),o.k0s()()(),o.j41(55,"ion-row",20)(56,"ion-col",14)(57,"b"),o.EFF(58,"Note:"),o.k0s()(),o.DNE(59,M,3,2,"ion-col",21),o.j41(60,"ion-col",22)(61,"ion-button",23),o.bIt("click",function(){return n.aggiungiNota()}),o.nrm(62,"ion-icon",24),o.k0s()()(),o.j41(63,"ion-row",25)(64,"ion-col",26)(65,"ion-button",27),o.bIt("click",function(){return n.cancel()}),o.EFF(66,"Annulla"),o.k0s()(),o.j41(67,"ion-col",26)(68,"ion-button",28),o.bIt("click",function(){return n.confirm()}),o.EFF(69,"Conferma"),o.k0s()()()()),2&e&&(o.R7$(3),o.JRh(n.title),o.R7$(5),o.R50("ngModel",n.personaggio.nome),o.R7$(3),o.R50("ngModel",n.personaggio.hpMax),o.R7$(3),o.R50("ngModel",n.personaggio.durMax),o.R7$(3),o.R50("ngModel",n.personaggio.ridMax),o.R7$(3),o.R50("ngModel",n.personaggio.rapBase),o.R7$(3),o.R50("ngModel",n.personaggio.dA),o.R7$(3),o.R50("ngModel",n.personaggio.dM),o.R7$(3),o.R50("ngModel",n.personaggio.critArma),o.R7$(3),o.R50("ngModel",n.personaggio.txcAttaccoBase),o.R7$(3),o.R50("ngModel",n.personaggio.gittata),o.R7$(3),o.R50("ngModel",n.personaggio.rageType),o.R7$(13),o.Y8G("ngForOf",n.personaggio.abilita),o.R7$(8),o.Y8G("ngForOf",n.personaggio.note))},dependencies:[d.Sq,p.BC,p.vS,l.Jm,l.hU,l.W9,l.eU,l.iq,l.$w,l.uz,l.ln,l.Nm,l.Ip,l.nc,l.BC,l.ai,l.su,l.Je,l.Gw]}),s})();const u="listaPersonaggi_local";var P=g(1713);let b=(()=>{var i;class s{constructor(){}get(e){const n=localStorage.getItem(e);return n?JSON.parse(n):null}set(e,n){localStorage.setItem(e,JSON.stringify(n))}remove(e){localStorage.removeItem(e)}}return(i=s).\u0275fac=function(e){return new(e||i)},i.\u0275prov=o.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),s})();function k(i,s){1&i&&(o.j41(0,"p"),o.EFF(1,"Nessuna abilit\xe0"),o.k0s())}function F(i,s){if(1&i&&(o.j41(0,"ul")(1,"div",22)(2,"b"),o.EFF(3),o.k0s(),o.j41(4,"p"),o.EFF(5),o.k0s()()()),2&i){const r=s.$implicit,e=s.index;o.R7$(3),o.SpI("",e+1,". "),o.R7$(2),o.SpI("\xa0",r.value,"")}}function j(i,s){1&i&&(o.j41(0,"p"),o.EFF(1,"Nessuna nota"),o.k0s())}function R(i,s){if(1&i){const r=o.RV6();o.j41(0,"ul",23),o.bIt("click",function(){const n=o.eBV(r).$implicit;return o.Njj(n.read=!n.read)}),o.j41(1,"div",22)(2,"b"),o.EFF(3),o.k0s(),o.j41(4,"p"),o.EFF(5),o.k0s()()()}if(2&i){const r=s.$implicit,e=s.index;o.R7$(3),o.SpI("",e+1,". "),o.R7$(2),o.SpI("\xa0",r.value,"")}}function I(i,s){if(1&i&&(o.j41(0,"ion-card-content")(1,"div",18)(2,"ion-row",1)(3,"ion-col",19)(4,"ion-col")(5,"strong"),o.EFF(6,"PF: "),o.k0s(),o.EFF(7),o.k0s()(),o.j41(8,"ion-col",19)(9,"ion-col")(10,"strong"),o.EFF(11,"RID: "),o.k0s(),o.EFF(12),o.k0s()(),o.j41(13,"ion-col",19)(14,"ion-col")(15,"strong"),o.EFF(16,"DUR: "),o.k0s(),o.EFF(17),o.k0s()(),o.j41(18,"ion-col",19)(19,"ion-col")(20,"strong"),o.EFF(21,"dA: "),o.k0s(),o.EFF(22),o.k0s()(),o.j41(23,"ion-col",19)(24,"ion-col")(25,"strong"),o.EFF(26,"dM: "),o.k0s(),o.EFF(27),o.k0s()(),o.j41(28,"ion-col",19)(29,"ion-col")(30,"strong"),o.EFF(31,"crit: "),o.k0s(),o.EFF(32),o.k0s()(),o.j41(33,"ion-col",19)(34,"ion-col")(35,"strong"),o.EFF(36,"Gittata: "),o.k0s(),o.EFF(37),o.k0s()(),o.j41(38,"ion-col",19)(39,"ion-col")(40,"strong"),o.EFF(41,"TxC: "),o.k0s(),o.EFF(42),o.k0s()(),o.j41(43,"ion-col",19)(44,"ion-col")(45,"strong"),o.EFF(46,"Rap: "),o.k0s(),o.EFF(47),o.k0s()()(),o.j41(48,"ion-row",20)(49,"strong"),o.EFF(50,"Abilit\xe0:"),o.k0s()(),o.j41(51,"ion-row")(52,"ion-col"),o.DNE(53,k,2,0,"p",17)(54,F,6,2,"ul",6),o.k0s()(),o.j41(55,"ion-row",20)(56,"strong"),o.EFF(57,"Note:"),o.k0s()(),o.j41(58,"ion-row")(59,"ion-col"),o.DNE(60,j,2,0,"p",17)(61,R,6,2,"ul",21),o.k0s()()()()),2&i){const r=o.XpG().$implicit;o.R7$(7),o.JRh(r.hpMax),o.R7$(5),o.JRh(r.ridMax),o.R7$(5),o.JRh(r.durMax),o.R7$(5),o.JRh(r.dA),o.R7$(5),o.JRh(r.dM),o.R7$(5),o.JRh(r.critArma),o.R7$(5),o.JRh(r.gittata?r.gittata:"1-1"),o.R7$(5),o.JRh(r.txcAttaccoBase),o.R7$(5),o.JRh(r.rapBase),o.R7$(6),o.Y8G("ngIf",0===r.abilita.length),o.R7$(),o.Y8G("ngForOf",r.abilita),o.R7$(6),o.Y8G("ngIf",0===r.note.length),o.R7$(),o.Y8G("ngForOf",r.note)}}function E(i,s){if(1&i){const r=o.RV6();o.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title")(3,"p",7),o.bIt("click",function(){const n=o.eBV(r).index,a=o.XpG();return o.Njj(a.attivaPersonaggio(n))}),o.EFF(4),o.k0s(),o.j41(5,"ion-button",8),o.bIt("click",function(){const n=o.eBV(r).index,a=o.XpG();return o.Njj(a.add(n))}),o.nrm(6,"ion-icon",9),o.k0s(),o.j41(7,"ion-button",10),o.bIt("click",function(){const n=o.eBV(r).index,a=o.XpG();return o.Njj(a.copyJson(n))}),o.nrm(8,"ion-icon",11),o.k0s(),o.j41(9,"ion-button",12),o.bIt("click",function(){const n=o.eBV(r).index,a=o.XpG();return o.Njj(a.modify(n))}),o.nrm(10,"ion-icon",13),o.k0s(),o.j41(11,"ion-button",14),o.bIt("click",function(){const n=o.eBV(r).index,a=o.XpG();return o.Njj(a.delete(n))}),o.nrm(12,"ion-icon",15),o.k0s()(),o.j41(13,"ion-card-subtitle",16),o.EFF(14),o.k0s()(),o.DNE(15,I,62,13,"ion-card-content",17),o.k0s()}if(2&i){const r=s.$implicit,e=s.index,n=o.XpG();o.R7$(3),o.Y8G("ngClass",e===n.selectedIndex?"nome-pg-selezionato":""),o.R7$(),o.SpI(" ",r.nome," "),o.R7$(10),o.SpI("",r.rageType," alla rage"),o.R7$(),o.Y8G("ngIf",e===n.selectedIndex)}}const y=[{path:"",component:(()=>{var i;class s{constructor(e,n,a,t,_){this.combattimentoService=e,this.modalCtrl=n,this.alertController=a,this.toastController=t,this.storageService=_,this.jsonCreazione="",this.listaPersonaggi=[],this.selectedIndex=void 0}ngOnInit(){const e=this.storageService.get(u);this.listaPersonaggi=e||[]}attivaPersonaggio(e){if(!(e<0||e>=this.listaPersonaggi.length)){if(this.selectedIndex===e)return void(this.selectedIndex=void 0);this.selectedIndex=e}}creaNuovo(){var e=this;return(0,c.A)(function*(){const n=yield e.modalCtrl.create({component:h,componentProps:{title:"Creazione Personaggio"}});n.present();const{data:a,role:t}=yield n.onWillDismiss();"confirm"===t&&a&&e.controllaEInserisciPersonaggio(a)})()}creaNuovoDaJson(){var e=this;return(0,c.A)(function*(){if(!e.jsonCreazione)return void(yield e.toastController.create({message:"Inserire un json",duration:3e3})).present();let n=null;try{n=JSON.parse(e.jsonCreazione)}catch{return void(yield e.toastController.create({message:"Il json inserito non \xe8 valido",duration:3e3})).present()}n&&(e.controllaEInserisciPersonaggio(n),e.jsonCreazione="")})()}copyJson(e){var n=this;return(0,c.A)(function*(){try{yield navigator.clipboard.writeText(JSON.stringify(n.listaPersonaggi[e])),(yield n.toastController.create({message:"I dati del mostro sono stati copiati negli appunti",duration:2e3})).present()}catch(a){console.error(a)}})()}controllaEInserisciPersonaggio(e){var n=this;return(0,c.A)(function*(){n.listaPersonaggi.find(a=>a.nome===e.nome)?(yield n.toastController.create({message:`${e.nome} \xe8 gi\xe0 stato inserito`,duration:3e3})).present():(n.listaPersonaggi.push(e),n.storageService.set(u,n.listaPersonaggi))})()}add(e){e<0||e>=this.listaPersonaggi.length||(this.combattimentoService.addPersonaggio(this.listaPersonaggi[e]),this.storageService.set(u,this.listaPersonaggi))}delete(e){var n=this;return(0,c.A)(function*(){yield(yield n.alertController.create({header:"Conferma",message:"Sei sicuro di voler procedere?",buttons:[{text:"Annulla",role:"cancel"},{text:"Conferma",handler:()=>{n.listaPersonaggi.splice(e,1),n.storageService.set(u,n.listaPersonaggi)}}]})).present()})()}modify(e){var n=this;return(0,c.A)(function*(){if(e<0||e>=n.listaPersonaggi.length)return;const a=yield n.modalCtrl.create({component:h,componentProps:{title:"Modifica Personaggio",personaggio:JSON.parse(JSON.stringify(n.listaPersonaggi[e]))}});a.present();const{data:t,role:_}=yield a.onWillDismiss();"confirm"===_&&t&&(n.listaPersonaggi[e]=t,n.storageService.set(u,n.listaPersonaggi))})()}}return(i=s).\u0275fac=function(e){return new(e||i)(o.rXU(P.x),o.rXU(l.W3),o.rXU(l.hG),o.rXU(l.K_),o.rXU(b))},i.\u0275cmp=o.VBU({type:i,selectors:[["app-creazione-personaggio"]],decls:11,vars:3,consts:[[3,"fullscreen"],[1,"ion-align-items-center"],[1,"title"],["color","dark",1,"crea-button",3,"click"],["label","JSON","labelPlacement","floating",3,"ngModelChange","ngModel"],["color","light",1,"crea-button",3,"click"],[4,"ngFor","ngForOf"],[1,"ion-no-margin","hover","nome-pg",3,"click","ngClass"],["shape","round","color","success",3,"click"],["slot","icon-only","name","add-outline"],["shape","round","color","secondary",3,"click"],["slot","icon-only","name","copy-outline"],["shape","round","color","medium",3,"click"],["slot","icon-only","name","create-outline","color","light"],["shape","round","color","danger",3,"click"],["slot","icon-only","name","trash-outline"],[2,"padding-left","20px"],[4,"ngIf"],[1,"card-content"],["size","1"],[2,"padding-top","1em"],["class","hover",3,"click",4,"ngFor","ngForOf"],[2,"display","flex"],[1,"hover",3,"click"]],template:function(e,n){1&e&&(o.j41(0,"ion-content",0)(1,"ion-row",1)(2,"p",2),o.EFF(3,"Lista dei Mostri"),o.k0s(),o.j41(4,"ion-button",3),o.bIt("click",function(){return n.creaNuovo()}),o.EFF(5,"Crea nuovo"),o.k0s(),o.j41(6,"ion-item")(7,"ion-input",4),o.mxI("ngModelChange",function(t){return o.DH7(n.jsonCreazione,t)||(n.jsonCreazione=t),t}),o.k0s()(),o.j41(8,"ion-button",5),o.bIt("click",function(){return n.creaNuovoDaJson()}),o.EFF(9,"Crea da json"),o.k0s()(),o.DNE(10,E,16,4,"ion-card",6),o.k0s()),2&e&&(o.Y8G("fullscreen",!0),o.R7$(7),o.R50("ngModel",n.jsonCreazione),o.R7$(3),o.Y8G("ngForOf",n.listaPersonaggi))},dependencies:[d.YU,d.Sq,d.bT,p.BC,p.vS,l.Jm,l.b_,l.I9,l.ME,l.HW,l.tN,l.hU,l.W9,l.iq,l.$w,l.uz,l.ln,l.Gw],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color: lightblue}.aggiungi-personaggio[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding-top:2em}ion-card[_ngcontent-%COMP%]{background-color:#fff}ion-card-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}ion-card-content[_ngcontent-%COMP%]{border-top:solid 2px lightgray}.card-content[_ngcontent-%COMP%]{padding-top:1em}.title[_ngcontent-%COMP%]{font-size:32px;padding-left:2rem}.crea-button[_ngcontent-%COMP%]{height:50px;padding-left:2rem}.nome-pg[_ngcontent-%COMP%]{width:500px;border-radius:15px;border:solid 2px lightblue;padding:5px 20px}.nome-pg-selezionato[_ngcontent-%COMP%], .nome-pg[_ngcontent-%COMP%]:hover{background-color:#add8e6;color:#fff}"]}),s})()}];let T=(()=>{var i;class s{}return(i=s).\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[f.iI.forChild(y),f.iI]}),s})(),z=(()=>{var i;class s{}return(i=s).\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[d.MD,p.YN,l.bv,T]}),s})()}}]);